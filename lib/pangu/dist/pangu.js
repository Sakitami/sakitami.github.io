// build time:Mon Jul 01 2019 17:53:00 GMT+0800 (GMT+08:00)
(function e(t,n){if(typeof exports==="object"&&typeof module==="object")module.exports=n();else if(typeof define==="function"&&define.amd)define("pangu",[],n);else if(typeof exports==="object")exports["pangu"]=n();else t["pangu"]=n()})(window,function(){return function(e){var t={};function n(a){if(t[a]){return t[a].exports}var r=t[a]={i:a,l:false,exports:{}};e[a].call(r.exports,r,r.exports,n);r.l=true;return r.exports}n.m=e;n.c=t;n.d=function(e,t,a){if(!n.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:a})}};n.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};n.t=function(e,t){if(t&1)e=n(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var a=Object.create(null);n.r(a);Object.defineProperty(a,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a};n.n=function(e){var t=e&&e.__esModule?function a(){return e["default"]}:function r(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=0)}([function(e,t,n){var a,r,i;(function(n,o){if(true){!(r=[],a=o,i=typeof a==="function"?a.apply(t,r):a,i!==undefined&&(e.exports=i))}else{var c}})(this,function(){"use strict";function t(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){t=function n(e){return typeof e}}else{t=function a(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return t(e)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function i(e,t,n){if(t)r(e.prototype,t);if(n)r(e,n);return e}function o(e,n){if(n&&(t(n)==="object"||typeof n==="function")){return n}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function n(e,t){e.__proto__=t;return e};return f(e,t)}var l=n(1),p=l.Pangu;function g(e){var t=this,n=arguments;var a=false;return function(){if(a){return}var r=t;a=true;e.apply(r,n)}}function d(e,t,n){var a=this,r=arguments;var i=null;var o=null;return function(){var c=a;var s=r;var u=+new Date;clearTimeout(i);if(!o){o=u}if(u-o>=n){e.apply(c,s);o=u}else{i=setTimeout(function(){e.apply(c,s)},t)}}}var v=function(e){u(t,e);function t(){var e;a(this,t);e=o(this,s(t).call(this));e.blockTags=/^(div|p|h1|h2|h3|h4|h5|h6)$/i;e.ignoredTags=/^(script|code|pre|textarea)$/i;e.presentationalTags=/^(b|code|del|em|i|s|strong)$/i;e.spaceLikeTags=/^(br|hr|i|img|pangu)$/i;e.spaceSensitiveTags=/^(a|del|pre|s|strike|u)$/i;e.isAutoSpacingPageExecuted=false;return e}i(t,[{key:"isContentEditable",value:function n(e){return e.isContentEditable||e.getAttribute&&e.getAttribute("g_editable")==="true"}},{key:"isSpecificTag",value:function r(e,t){return e&&e.nodeName&&e.nodeName.search(t)>=0}},{key:"isInsideSpecificTag",value:function c(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var a=e;if(n){if(this.isSpecificTag(a,t)){return true}}while(a.parentNode){a=a.parentNode;if(this.isSpecificTag(a,t)){return true}}return false}},{key:"canIgnoreNode",value:function f(e){var t=e;if(t&&(this.isSpecificTag(t,this.ignoredTags)||this.isContentEditable(t))){return true}while(t.parentNode){t=t.parentNode;if(t&&(this.isSpecificTag(t,this.ignoredTags)||this.isContentEditable(t))){return true}}return false}},{key:"isFirstTextChild",value:function l(e,t){var n=e.childNodes;for(var a=0;a<n.length;a++){var r=n[a];if(r.nodeType!==Node.COMMENT_NODE&&r.textContent){return r===t}}return false}},{key:"isLastTextChild",value:function p(e,t){var n=e.childNodes;for(var a=n.length-1;a>-1;a--){var r=n[a];if(r.nodeType!==Node.COMMENT_NODE&&r.textContent){return r===t}}return false}},{key:"spacingNodeByXPath",value:function v(e,t){if(!(t instanceof Node)||t instanceof DocumentFragment){return}var n=document.evaluate(e,t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var a;var r;for(var i=n.snapshotLength-1;i>-1;--i){a=n.snapshotItem(i);if(this.isSpecificTag(a.parentNode,this.presentationalTags)&&!this.isInsideSpecificTag(a.parentNode,this.ignoredTags)){var o=a.parentNode;if(o.previousSibling){var c=o.previousSibling;if(c.nodeType===Node.TEXT_NODE){var s=c.data.substr(-1)+a.data.toString().charAt(0);var u=this.spacing(s);if(s!==u){c.data="".concat(c.data," ")}}}if(o.nextSibling){var f=o.nextSibling;if(f.nodeType===Node.TEXT_NODE){var l=a.data.substr(-1)+f.data.toString().charAt(0);var p=this.spacing(l);if(l!==p){f.data=" ".concat(f.data)}}}}if(this.canIgnoreNode(a)){r=a;continue}var g=this.spacing(a.data);if(a.data!==g){a.data=g}if(r){if(a.nextSibling&&a.nextSibling.nodeName.search(this.spaceLikeTags)>=0){r=a;continue}var d=a.data.toString().substr(-1)+r.data.toString().substr(0,1);var v=this.spacing(d);if(v!==d){var h=r;while(h.parentNode&&h.nodeName.search(this.spaceSensitiveTags)===-1&&this.isFirstTextChild(h.parentNode,h)){h=h.parentNode}var y=a;while(y.parentNode&&y.nodeName.search(this.spaceSensitiveTags)===-1&&this.isLastTextChild(y.parentNode,y)){y=y.parentNode}if(y.nextSibling){if(y.nextSibling.nodeName.search(this.spaceLikeTags)>=0){r=a;continue}}if(y.nodeName.search(this.blockTags)===-1){if(h.nodeName.search(this.spaceSensitiveTags)===-1){if(h.nodeName.search(this.ignoredTags)===-1&&h.nodeName.search(this.blockTags)===-1){if(r.previousSibling){if(r.previousSibling.nodeName.search(this.spaceLikeTags)===-1){r.data=" ".concat(r.data)}}else{if(!this.canIgnoreNode(r)){r.data=" ".concat(r.data)}}}}else if(y.nodeName.search(this.spaceSensitiveTags)===-1){a.data="".concat(a.data," ")}else{var b=document.createElement("pangu");b.innerHTML=" ";if(h.previousSibling){if(h.previousSibling.nodeName.search(this.spaceLikeTags)===-1){h.parentNode.insertBefore(b,h)}}else{h.parentNode.insertBefore(b,h)}if(!b.previousElementSibling){if(b.parentNode){b.parentNode.removeChild(b)}}}}}}r=a}}},{key:"spacingNode",value:function h(e){var t=".//*/text()[normalize-space(.)]";if(e.children&&e.children.length===0){t=".//text()[normalize-space(.)]"}this.spacingNodeByXPath(t,e)}},{key:"spacingElementById",value:function y(e){var t='id("'.concat(e,'")//text()');this.spacingNodeByXPath(t,document)}},{key:"spacingElementByClassName",value:function b(e){var t='//*[contains(concat(" ", normalize-space(@class), " "), "'.concat(e,'")]//text()');this.spacingNodeByXPath(t,document)}},{key:"spacingElementByTagName",value:function m(e){var t="//".concat(e,"//text()");this.spacingNodeByXPath(t,document)}},{key:"spacingPageTitle",value:function T(){var e="/html/head/title/text()";this.spacingNodeByXPath(e,document)}},{key:"spacingPageBody",value:function N(){var e="/html/body//*/text()[normalize-space(.)]";["script","style","textarea"].forEach(function(t){e="".concat(e,'[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="').concat(t,'"]')});this.spacingNodeByXPath(e,document)}},{key:"spacingPage",value:function x(){this.spacingPageTitle();this.spacingPageBody()}},{key:"autoSpacingPage",value:function $(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1e3;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2e3;if(!(document.body instanceof Node)){return}if(this.isAutoSpacingPageExecuted){return}this.isAutoSpacingPageExecuted=true;var a=this;var r=g(function(){a.spacingPage()});var i=document.getElementsByTagName("video");if(i.length===0){setTimeout(function(){r()},e)}else{for(var o=0;o<i.length;o++){var c=i[o];if(c.readyState===4){setTimeout(function(){r()},3e3);break}c.addEventListener("loadeddata",function(){setTimeout(function(){r()},4e3)})}}var s=[];var u=d(function(){while(s.length){var e=s.shift();if(e){a.spacingNode(e)}}},t,{maxWait:n});var f=new MutationObserver(function(e,t){e.forEach(function(e){switch(e.type){case"childList":e.addedNodes.forEach(function(e){if(e.nodeType===Node.ELEMENT_NODE){s.push(e)}else if(e.nodeType===Node.TEXT_NODE){s.push(e.parentNode)}});break;case"characterData":var t=e.target;if(t.nodeType===Node.TEXT_NODE){s.push(t.parentNode)}break;default:break}});u()});f.observe(document.body,{characterData:true,childList:true,subtree:true})}}]);return t}(p);var h=new v;e.exports=h;e.exports.default=h;e.exports.Pangu=v})},function(e,t,n){var a,r,i;(function(n,o){if(true){!(r=[],a=o,i=typeof a==="function"?a.apply(t,r):a,i!==undefined&&(e.exports=i))}else{var c}})(this,function(){"use strict";function t(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){t=function n(e){return typeof e}}else{t=function a(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return t(e)}function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function r(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}var i="⺀-⻿⼀-⿟぀-ゟ゠-ヺー-ヿ㄀-ㄯ㈀-㋿㐀-䶿一-鿿豈-﫿";var o=new RegExp("[".concat(i,"]"));var c=new RegExp("([".concat(i,"])[ ]*([\\:]+|\\.)[ ]*([").concat(i,"])"),"g");var s=new RegExp("([".concat(i,"])[ ]*([~\\!;,\\?]+)[ ]*"),"g");var u=new RegExp("([\\.]{2,}|…)([".concat(i,"])"),"g");var f=new RegExp("([".concat(i,"])\\:([A-Z0-9\\(\\)])"),"g");var l=new RegExp("([".concat(i,'])([`"״])'),"g");var p=new RegExp('([`"״])(['.concat(i,"])"),"g");var g=/([`"\u05f4]+)[ ]*(.+?)[ ]*([`"\u05f4]+)/g;var d=new RegExp("([".concat(i,"])('[^s])"),"g");var v=new RegExp("(')([".concat(i,"])"),"g");var h=new RegExp("([A-Za-z0-9".concat(i,"])( )('s)"),"g");var y=new RegExp("([".concat(i,"])(#)([").concat(i,"]+)(#)([").concat(i,"])"),"g");var b=new RegExp("([".concat(i,"])(#([^ ]))"),"g");var m=new RegExp("(([^ ])#)([".concat(i,"])"),"g");var T=new RegExp("([".concat(i,"])([\\+\\-\\*\\/=&\\|<>])([A-Za-z0-9])"),"g");var N=new RegExp("([A-Za-z0-9])([\\+\\-\\*\\/=&\\|<>])([".concat(i,"])"),"g");var x=/([\/]) ([a-z\-_\.\/]+)/g;var $=/([\/\.])([A-Za-z\-_\.\/]+) ([\/])/g;var E=new RegExp("([".concat(i,"])([\\(\\[\\{<>“])"),"g");var S=new RegExp("([\\)\\]\\}<>”])([".concat(i,"])"),"g");var w=/([\(\[\{<\u201c]+)[ ]*(.+?)[ ]*([\)\]\}>\u201d]+)/;var k=new RegExp("([A-Za-z0-9".concat(i,"])[ ]*([“])([A-Za-z0-9").concat(i,"\\-_ ]+)([”])"),"g");var P=new RegExp("([“])([A-Za-z0-9".concat(i,"\\-_ ]+)([”])[ ]*([A-Za-z0-9").concat(i,"])"),"g");var O=/([A-Za-z0-9])([\(\[\{])/g;var _=/([\)\]\}])([A-Za-z0-9])/g;var R=new RegExp("([".concat(i,"])([A-Za-zͰ-Ͽ0-9@\\$%\\^&\\*\\-\\+\\\\=\\|/¡-ÿ⅐-↏✀—➿])"),"g");var A=new RegExp("([A-Za-zͰ-Ͽ0-9~\\$%\\^&\\*\\-\\+\\\\=\\|/!;:,\\.\\?¡-ÿ⅐-↏✀—➿])([".concat(i,"])"),"g");var j=/(%)([A-Za-z])/g;var z=/([ ]*)([\u00b7\u2022\u2027])([ ]*)/g;var C=function(){function e(){n(this,e);this.version="4.0.7"}r(e,[{key:"convertToFullwidth",value:function a(e){return e.replace(/~/g,"～").replace(/!/g,"！").replace(/;/g,"；").replace(/:/g,"：").replace(/,/g,"，").replace(/\./g,"。").replace(/\?/g,"？")}},{key:"spacing",value:function i(e){if(typeof e!=="string"){console.warn("spacing(text) only accepts string but got ".concat(t(e)));return e}if(e.length<=1||!o.test(e)){return e}var n=this;var a=e;a=a.replace(c,function(e,t,a,r){var i=n.convertToFullwidth(a);return"".concat(t).concat(i).concat(r)});a=a.replace(s,function(e,t,a){var r=n.convertToFullwidth(a);return"".concat(t).concat(r)});a=a.replace(u,"$1 $2");a=a.replace(f,"$1：$2");a=a.replace(l,"$1 $2");a=a.replace(p,"$1 $2");a=a.replace(g,"$1$2$3");a=a.replace(d,"$1 $2");a=a.replace(v,"$1 $2");a=a.replace(h,"$1's");a=a.replace(y,"$1 $2$3$4 $5");a=a.replace(b,"$1 $2");a=a.replace(m,"$1 $3");a=a.replace(T,"$1 $2 $3");a=a.replace(N,"$1 $2 $3");a=a.replace(x,"$1$2");a=a.replace($,"$1$2$3");a=a.replace(E,"$1 $2");a=a.replace(S,"$1 $2");a=a.replace(w,"$1$2$3");a=a.replace(k,"$1 $2$3$4");a=a.replace(P,"$1$2$3 $4");a=a.replace(O,"$1 $2");a=a.replace(_,"$1 $2");a=a.replace(R,"$1 $2");a=a.replace(A,"$1 $2");a=a.replace(j,"$1 $2");a=a.replace(z,"・");return a}},{key:"spacingText",value:function C(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};var n;try{n=this.spacing(e)}catch(a){t(a);return}t(null,n)}},{key:"spacingTextSync",value:function B(e){return this.spacing(e)}}]);return e}();var B=new C;e.exports=B;e.exports.default=B;e.exports.Pangu=C})}])});
//rebuild by neat 